<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Tracing Sheet Generator</title>
    <!-- Use link tags instead of @import for better reliability -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+SC:wght@400;700&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="resources/stylesheet.css">
</head>
<body>
    <div class="container">
        <h1>Chinese Tracing Generator</h1>
        
        <div class="preview-box">
            <canvas id="preview-canvas" width="160" height="160"></canvas>
            <p>Font Style Preview (永)</p>
        </div>

        <div class="controls">
            <div class="input-group">
                <label for="font-family">Writing Style (Font):</label>
                <select id="font-family">
                    <option value="KaiTi, STKaiti, 'Ma Shan Zheng', cursive" selected>楷体 (Kaiti - Microsoft KaiTi)</option>
                    <option value="SimSun, STSong, 'Noto Serif SC', serif">宋体 (Songti - SimSun)</option>
                    <option value="'Noto Sans SC', sans-serif">黑体 (Heiti - Sans-Serif)</option>
                    <option value="other">Other Font (Custom)</option>
                </select>
            </div>
            <div id="custom-font-container" class="input-group" style="display: none;">
                <label for="custom-font-name">Custom Font Name:</label>
                <input type="text" id="custom-font-name" placeholder="e.g. Arial, 'Times New Roman'">
            </div>
            <div class="input-group">
                <label for="difficulty-level">Difficulty Level:</label>
                <select id="difficulty-level">
                    <option value="all" selected>All Levels</option>
                    <option value="easy">Easy (Simple strokes)</option>
                    <option value="medium">Medium (Common characters)</option>
                    <option value="difficulty">Difficult (More complex)</option>
                </select>
            </div>
            <div class="input-group">
                <label for="page-count">Number of Pages:</label>
                <input type="number" id="page-count" value="1" min="1">
            </div>
            
            <div class="button-group">
                <button id="refresh-batch" class="secondary-btn">Regenerate Characters</button>
                <button id="generate-pdf">Generate PDF</button>
            </div>
        </div>

        <div id="batch-preview" class="batch-preview">
            <h3>Characters to be in PDF:</h3>
            <div id="character-list" class="character-list"></div>
        </div>

        <div id="font-status" class="status-message">Ready</div>
        <div id="character-status" class="status-message">Loading library...</div>
    </div>
    
    <!-- Hidden elements to force font loading -->
    <div style="visibility: hidden; position: absolute; top: -1000px;">
        <span style="font-family: 'Ma Shan Zheng';">楷体</span>
        <span style="font-family: 'Noto Serif SC';">宋体</span>
        <span style="font-family: 'Noto Sans SC';">黑体</span>
        <span style="font-family: 'KaiTi';">楷体</span>
        <span style="font-family: 'edukai';">楷体</span>
        <span style="font-family: 'eduson';">宋体</span>
        <span style="font-family: 'eduli';">隶书</span>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="resources/characters.js"></script>
    <script src="resources/trace.js"></script>
</body>
</html>